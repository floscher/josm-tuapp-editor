delete from ref.subroute_new where route = 'T3' and direction = 'SAGRADO_CORAZON';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.11082637296852 18.464775388825267,-66.11085884324213 18.464889069261766,-66.110911 18.464964,-66.11106391277859 18.46495668990588,-66.1111889917452 18.464898991301368,-66.11120264863187 18.464818070445226,-66.1110378810945 18.464131915499063,-66.11080256757876 18.463981082884217,-66.109968 18.463934,-66.109457 18.463918,-66.107036 18.463785,-66.10691094054724 18.463821583274534,-66.10672038922051 18.46412281910674,-66.10624800330976 18.46488292729487,-66.10611627566338 18.465022916144747,-66.10596376753736 18.46513812386487,-66.10586627321095 18.465190144592086,-66.10577604609668 18.46519672781387,-66.10568349722236 18.46518419440739,-66.10516752972637 18.46504420775509,-66.10337603743857 18.46456251503067,-66.10276371322607 18.464388389819355,-66.10240415675787 18.464273458143474,-66.10216615675787 18.46423406930782,-66.10144754597837 18.46418465257237,-66.10032176198209 18.464101541841607,-66.09942033193416 18.464044855036022,-66.09889613711071 18.464032016360377,-66.0983721178336 18.464004138015678,-66.09706483768684 18.463908388847443,-66.09579125659364 18.463813068620944,-66.09448909229197 18.46371606863058,-66.093919 18.463703,-66.09310336267814 18.463392702213742,-66.092542 18.463162,-66.091061 18.462581,-66.09044609751204 18.46235065276855,-66.08955 18.461999,-66.08906385949415 18.461835138953944,-66.0889274667487 18.461809413457317,-66.0887464432509 18.46180223416594,-66.08855036368135 18.461820385709625,-66.08829931338285 18.461852794224907,-66.08802612146812 18.461892707291067,-66.0878490045978 18.461880118452402,-66.08774718909889 18.461818236909444,-66.0876305764923 18.461710060953948,-66.0874936890815 18.46151433328545,-66.08742028824615 18.461305470381802,-66.08737032467708 18.461121986247026,-66.08733926132747 18.460858518908037,-66.08734357832853 18.46022683951634,-66.08731907222857 18.45988781477765,-66.086941 18.458503,-66.086797 18.457968,-66.08666923209306 18.45774043401674,-66.08646462180221 18.457535881392943,-66.08593966594947 18.457108796126988,-66.085634 18.456896,-66.08137077345047 18.454950912694752,-66.08036322521318 18.45444341096202,-66.07829523813929 18.453091134380895,-66.07733511812101 18.452613042136157,-66.07587306074619 18.451701565321816,-66.07445572468973 18.450777147643983,-66.06870866915403 18.446362053292866,-66.06611882296555 18.44437489482225,-66.06471263001639 18.443291814938192,-66.0638240837836 18.44259270466376,-66.06316775290018 18.442051159957636,-66.0625431267341 18.441494484323442,-66.06189842673663 18.44080699833813,-66.06116469073677 18.439965605841714,-66.05984313803216 18.438425770737386,-66.05964286496551 18.43812620060121,-66.05947450886151 18.43772630891035,-66.05941022342692 18.43736555028221,-66.05937457993438 18.436896656309226,-66.05934151166775 18.43620324859036,-66.05930263315862 18.435529853846184)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T3','SAGRADO_CORAZON', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_new where route = 'T3' and direction = 'SAN_JUAN';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.06043049573628 18.435674768618867,-66.0603559083485 18.435956847418137,-66.0602900183912 18.436003641878344,-66.05945211931832 18.436011776699267,-66.05936719065222 18.436029520165228,-66.05929803842345 18.43611289143217,-66.05927873743448 18.436217773712553,-66.05930160169076 18.436903146851893,-66.0593874642198 18.437746056118012,-66.05946217146405 18.437939049575807,-66.0595608972606 18.43814113249607,-66.0597884043494 18.43847499024181,-66.06010309302066 18.438893981676365,-66.06110663689944 18.440002321236605,-66.06183392247291 18.440846773154153,-66.06248801839124 18.44154280824119,-66.06311776209581 18.44210164301085,-66.0637547417001 18.44264012798895,-66.06461426101419 18.443282636265927,-66.06578823861398 18.444212739229034,-66.06898442488146 18.446677181777662,-66.0744271095357 18.450834476130233,-66.07584227304966 18.451755648508776,-66.0773031901394 18.45264657353611,-66.07829637842435 18.45314629878502,-66.0803292063866 18.454479226585317,-66.08130918827348 18.454988101807064,-66.0853224901441 18.45681947728331,-66.08548622521317 18.456925999999996,-66.08564133372974 18.457050669204513,-66.08579837339913 18.457197766826486,-66.0859930360092 18.457467714180744,-66.08609940865425 18.457851069670948,-66.08624889947588 18.45856824486197,-66.086481 18.460045,-66.0866 18.460384,-66.08670370650476 18.46066177881125,-66.0868774270438 18.460973511127126,-66.08695527313328 18.46104418436862,-66.08711412952741 18.461143599161243,-66.08768017137582 18.46132875955453,-66.08786894833698 18.46143248560371,-66.08796019894923 18.461549831251403,-66.08806018055799 18.461617134343026,-66.08824240510303 18.46167831894889,-66.0884023512791 18.46178352617876,-66.08857572028131 18.46184300000001,-66.08875255132673 18.461833194450243,-66.08892168295931 18.461840135762028,-66.089049 18.461863,-66.089652 18.462081,-66.09025765953552 18.462309944442726,-66.090593 18.462444,-66.091313 18.462729,-66.091949 18.462982,-66.09290853507474 18.463351500249875,-66.09389930816738 18.463738541806794,-66.09407415675788 18.463748347382225,-66.09448110243312 18.463747276294743,-66.09563845131872 18.463834793229942,-66.09687534560597 18.46391891711145,-66.09835566125552 18.464030258938294,-66.09889283348878 18.46406021840041,-66.09941958543368 18.46407508029958,-66.10015651633894 18.46413024259205,-66.10144861488553 18.46422131103342,-66.10216561612785 18.4642726669736,-66.1023971563432 18.464309087798632,-66.10298291894688 18.464495833503417,-66.104493 18.464891,-66.105672 18.465215,-66.10599 18.465264,-66.1062 18.465284,-66.106531 18.465233,-66.106751 18.465253,-66.107099 18.465307,-66.107675 18.465238,-66.107745 18.465149,-66.107807 18.463948,-66.107857 18.463898,-66.107933 18.463894,-66.108585 18.463941,-66.110095 18.46402,-66.11039006480111 18.464033513944848,-66.11047035671649 18.464098263738816,-66.11055529191538 18.46428504139975,-66.11069705945276 18.464366680462586,-66.11074058917912 18.46445633300225,-66.110822 18.464748)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T3','SAN_JUAN', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'T3' and direction = 'SAGRADO_CORAZON'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1597, 0, 'T3', 'SAGRADO_CORAZON'),(279, 1, 'T3', 'SAGRADO_CORAZON'),(281, 2, 'T3', 'SAGRADO_CORAZON'),(282, 3, 'T3', 'SAGRADO_CORAZON'),(283, 4, 'T3', 'SAGRADO_CORAZON'),(284, 5, 'T3', 'SAGRADO_CORAZON'),(285, 6, 'T3', 'SAGRADO_CORAZON'),(286, 7, 'T3', 'SAGRADO_CORAZON'),(287, 8, 'T3', 'SAGRADO_CORAZON'),(288, 9, 'T3', 'SAGRADO_CORAZON'),(289, 10, 'T3', 'SAGRADO_CORAZON'),(290, 11, 'T3', 'SAGRADO_CORAZON'),(291, 12, 'T3', 'SAGRADO_CORAZON'),(44, 13, 'T3', 'SAGRADO_CORAZON'),(45, 14, 'T3', 'SAGRADO_CORAZON'),(46, 15, 'T3', 'SAGRADO_CORAZON'),(47, 16, 'T3', 'SAGRADO_CORAZON'),(48, 17, 'T3', 'SAGRADO_CORAZON'),(49, 18, 'T3', 'SAGRADO_CORAZON'),(50, 19, 'T3', 'SAGRADO_CORAZON'),(51, 20, 'T3', 'SAGRADO_CORAZON'),(52, 21, 'T3', 'SAGRADO_CORAZON'),(53, 22, 'T3', 'SAGRADO_CORAZON');
delete from ref.subroute_stop where route = 'T3' and direction = 'SAN_JUAN'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (36, 0, 'T3', 'SAN_JUAN'),(1573, 1, 'T3', 'SAN_JUAN'),(1572, 2, 'T3', 'SAN_JUAN'),(1575, 3, 'T3', 'SAN_JUAN'),(1603, 4, 'T3', 'SAN_JUAN'),(1604, 5, 'T3', 'SAN_JUAN'),(259, 6, 'T3', 'SAN_JUAN'),(260, 7, 'T3', 'SAN_JUAN'),(261, 8, 'T3', 'SAN_JUAN'),(262, 9, 'T3', 'SAN_JUAN'),(263, 10, 'T3', 'SAN_JUAN'),(264, 11, 'T3', 'SAN_JUAN'),(265, 12, 'T3', 'SAN_JUAN'),(266, 13, 'T3', 'SAN_JUAN'),(267, 14, 'T3', 'SAN_JUAN'),(268, 15, 'T3', 'SAN_JUAN'),(269, 16, 'T3', 'SAN_JUAN'),(270, 17, 'T3', 'SAN_JUAN'),(271, 18, 'T3', 'SAN_JUAN'),(272, 19, 'T3', 'SAN_JUAN'),(274, 20, 'T3', 'SAN_JUAN'),(276, 21, 'T3', 'SAN_JUAN'),(277, 22, 'T3', 'SAN_JUAN'),(278, 23, 'T3', 'SAN_JUAN'),(1597, 24, 'T3', 'SAN_JUAN');
